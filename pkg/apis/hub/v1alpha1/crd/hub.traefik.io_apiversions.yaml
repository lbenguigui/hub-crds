---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
  name: apiversions.hub.traefik.io
spec:
  group: hub.traefik.io
  names:
    kind: APIVersion
    listKind: APIVersionList
    plural: apiversions
    singular: apiversion
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.apiName
      name: APIName
      type: string
    - jsonPath: .spec.title
      name: Title
      type: string
    - jsonPath: .spec.release
      name: Release
      type: string
    - jsonPath: .spec.service.name
      name: ServiceName
      type: string
    - jsonPath: .spec.service.port.number
      name: ServicePort
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: APIVersion defines an APIVersion.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: The desired behavior of this APIVersion.
            properties:
              openApiSpec:
                description: OpenAPISpec defines where to obtain the OpenAPI specification
                  of the Service.
                properties:
                  operationSets:
                    description: OperationSets defines the sets of operations that
                      can be used for advanced filtering in APIAccesses.
                    items:
                      description: OperationSet selects a set of OpenAPI operations
                        that can be referenced for advanced filtering on APIAccesses.
                      properties:
                        matchers:
                          description: Matchers defines a set of OperationMatchers
                            that selects spec operations.
                          items:
                            description: OperationMatcher selects the operations that
                              will be part of the OperationSet.
                            minProperties: 1
                            properties:
                              methods:
                                description: Methods defines a set of methods of the
                                  specs operation to select.
                                items:
                                  type: string
                                maxItems: 10
                                type: array
                              path:
                                description: Path defines the exact path of the spec
                                  operations to select.
                                maxLength: 255
                                type: string
                                x-kubernetes-validations:
                                - message: must start with a '/'
                                  rule: self.startsWith('/')
                                - message: cannot contains '../'
                                  rule: '!self.matches(r"""(\/\.\.\/)|(\/\.\.$)""")'
                              pathPrefix:
                                description: PathPrefix defines the path prefix of
                                  the spec operations to select.
                                maxLength: 255
                                type: string
                                x-kubernetes-validations:
                                - message: must start with a '/'
                                  rule: self.startsWith('/')
                                - message: cannot contains '../'
                                  rule: '!self.matches(r"""(\/\.\.\/)|(\/\.\.$)""")'
                              pathRegex:
                                description: PathRegex defines the path regex of the
                                  matching spec operations to select.
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: path, pathPrefix and pathRegex are mutually
                                exclusive
                              rule: '[has(self.path), has(self.pathPrefix), has(self.pathRegex)].filter(x,
                                x).size() <= 1'
                          maxItems: 100
                          minItems: 1
                          type: array
                        name:
                          description: Name is the name of the OperationSet.
                          maxLength: 253
                          type: string
                      required:
                      - matchers
                      - name
                      type: object
                    maxItems: 100
                    type: array
                  path:
                    description: Path is the path on the Kubernetes Service for obtaining
                      the specification. This Path must be queryable with a GET method
                      and serve a YAML or JSON document.
                    maxLength: 255
                    type: string
                    x-kubernetes-validations:
                    - message: must start with a '/'
                      rule: self.startsWith('/')
                    - message: cannot contains '../'
                      rule: '!self.matches(r"""(\/\.\.\/)|(\/\.\.$)""")'
                  url:
                    description: URL is a Traefik Hub agent accessible URL for obtaining
                      the specification. This URL must be queryable with a GET method
                      and serve a YAML or JSON document.
                    type: string
                    x-kubernetes-validations:
                    - message: must be a valid URL
                      rule: isURL(self)
                type: object
                x-kubernetes-validations:
                - message: path or url must be defined
                  rule: has(self.path) || has(self.url)
              release:
                description: 'Release is the version number of the API. This value
                  must follow the SemVer format: https://semver.org/'
                maxLength: 100
                type: string
                x-kubernetes-validations:
                - message: must be a valid semver version
                  rule: self.matches(r"""^v?(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$""")
              title:
                description: Title is the public facing name of the APIVersion.
                type: string
            type: object
          status:
            description: The current status of this APIVersion.
            properties:
              hash:
                description: Hash is a hash representing the APIVersion.
                type: string
              syncedAt:
                format: date-time
                type: string
              version:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
